// Generated by CoffeeScript 1.7.1
Crafty.c('Map', {
  map: function(game) {
    var tile_position, _i, _len, _ref, _results;
    this.requires('Cell');
    game.map_grid.generateMap();
    game.map_grid.setStartPositions(game.players, game.initial_units);
    _ref = game.map_grid.positions;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      tile_position = _ref[_i];
      _results.push(Crafty.e('Cell').cell(tile_position.q, tile_position.r).pos(tile_position.q, tile_position.r, game.map_grid.tile.size));
    }
    return _results;
  }
});

Crafty.c('Cell', {
  cell: function(q, r) {
    var dbgMsg;
    this.requires('2D, DOM, Grid, Image').image('assets/cell_default.png');
    dbgMsg = Crafty.e('2D, DOM, Text').attr({
      x: 40,
      y: 40,
      w: 128
    }).text(q + " / " + r);
    return this.attach(dbgMsg);
  }
});
